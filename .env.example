# ============================================================================
# Maintenance Dashboard - Environment Variables
# ============================================================================
# Copy this file to .env and fill in the actual values for your environment
#
# For Docker deployment via Portainer:
#   1. Use "mysql-server" as DB_HOST (container name on existing mysql-server network)
#   2. Use actual IPs for MSSQL branch servers (external to Docker)
#   3. Generate a new JWT_SECRET with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ============================================================================

# --- Node.js Configuration ---
NODE_ENV=production
PORT=3001

# --- MySQL/Prisma Database Configuration (Main Database on Tower) ---
# Docker Host: Use "mysql-server" container name
# Local Dev: Use "10.0.60.57" IP address
DB_HOST=mysql-server
DB_PORT=3306
DB_USER=chadupton
DB_PASSWORD=YOUR_SECURE_PASSWORD_HERE
DB_NAME=maintenance_db

# Full DATABASE_URL (auto-constructed in docker-compose)
# DATABASE_URL=mysql://chadupton:YOUR_SECURE_PASSWORD_HERE@mysql-server:3306/maintenance_db

# --- Data Source Configuration ---
# Set to LIVE to fetch from actual branch databases
# Set to MOCK for testing without live connections
DATA_SOURCE=LIVE

# --- MSSQL Sage 200 Configuration (Branch Databases) ---
# These credentials are the same for all four branches
MSSQL_USER=your_mssql_username
MSSQL_PASS=your_mssql_password
MSSQL_PORT=1433

# --- Branch 1: Pietermaritzburg (PMB) ---
# Server format: IP\InstanceName
PMB_SERVER=10.0.1.251\SAGE200
PMB_DB=Truda Foods Pietermaritzburg

# --- Branch 2: Pretoria (PTA) ---
PTA_SERVER=10.2.0.12\SAGE200
PTA_DB=Truda Foods Pretoria

# --- Branch 3: Queenstown (QTN) ---
QTN_SERVER=10.3.0.14\SAGE200
QTN_DB=Truda Foods Queenstown

# --- Branch 4: Cape Town (CPT) ---
CPT_SERVER=10.1.0.8\SAGE200
CPT_DB=Truda Foods Cape Branch

# --- JWT Security Configuration ---
# IMPORTANT: Generate a unique secret for each environment
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_secret_key_here_min_32_characters_required
JWT_EXPIRES_IN=24h

# --- Frontend Configuration ---
# For Docker: Use internal service name or external URL
# For local dev: Use http://localhost:5173
FRONTEND_URL=http://frontend:5173

# --- Frontend API Configuration (for Vite) ---
# URL that the frontend JavaScript uses to call the backend API
# For Docker: Use internal service name
# For local dev: Use http://localhost:3001
VITE_API_URL=http://backend:3001

# --- Docker Container Ports ---
# These are used in docker-compose.yml for port mapping
BACKEND_PORT=3001
FRONTEND_PORT=5173

# ============================================================================
# PORTAINER DEPLOYMENT NOTES
# ============================================================================
#
# When deploying via Portainer Stacks:
#
# 1. Create the docker-compose.yml in the Portainer interface
# 2. Add environment variables using "." separator for nested values
# 3. Ensure the mysql-server network exists (created by the MySQL stack)
# 4. Test MSSQL connections before deploying (might need VPN/network access)
# 5. Monitor logs in Portainer: Services > maintenance-dashboard-backend > Logs
#
# Database Connection Flow in Docker:
# - MySQL: backend -> mysql-server network -> mysql-server container
# - MSSQL: backend -> host network -> external IPs (10.0.1.251, 10.2.0.12, etc.)
#
# ============================================================================
